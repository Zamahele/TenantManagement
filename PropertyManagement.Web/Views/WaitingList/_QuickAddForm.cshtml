@model PropertyManagement.Web.ViewModels.QuickAddWaitingListViewModel

<!-- Form Error Display -->
<div id="quickFormErrors" class="alert alert-danger" style="display: none;"></div>
<div id="quickFormSuccess" class="alert alert-success" style="display: none;"></div>

<form id="quickAddForm" action="/WaitingList/QuickAdd" method="post" autocomplete="off" class="needs-validation" novalidate>
    @Html.AntiForgeryToken()

    <div class="row">
        <!-- Header -->
        <div class="col-12 mb-3">
            <div class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>
                <strong>Quick Add for Phone Calls</strong><br>
                Quickly add a prospect to the waiting list during a phone conversation. Only essential information is required.
            </div>
        </div>

        <!-- Left Column -->
        <div class="col-lg-6">
            <div class="mb-3">
                <label asp-for="PhoneNumber" class="form-label fw-semibold">Phone Number <span class="text-danger">*</span></label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-telephone"></i>
                    </span>
                    <input asp-for="PhoneNumber" 
                           type="tel"
                           class="form-control" 
                           placeholder="0821234567" 
                           pattern="^0[6-8][0-9]{8}$"
                           title="South African mobile number (e.g., 0821234567)"
                           maxlength="10" 
                           autofocus 
                           required />
                </div>
                <div class="invalid-feedback">Please enter a valid SA mobile number.</div>
                <small class="text-muted">South African mobile format (e.g., 0821234567)</small>
            </div>

            <div class="mb-3">
                <label asp-for="FullName" class="form-label fw-semibold">Full Name</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-person-circle"></i>
                    </span>
                    <input asp-for="FullName" class="form-control" placeholder="Enter their name if provided" />
                </div>
                <small class="text-muted">Optional - can be added later if not provided</small>
            </div>

            <div class="mb-3">
                <label asp-for="PreferredRoomType" class="form-label fw-semibold">Preferred Room Type</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-door-closed"></i>
                    </span>
                    <select asp-for="PreferredRoomType" class="form-select">
                        <option value="Any">Any Room Type</option>
                        <option value="Single">Single Room</option>
                        <option value="Double">Double Room</option>
                        <option value="Family">Family Room</option>
                        <option value="Studio">Studio Apartment</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-lg-6">
            <div class="mb-3">
                <label asp-for="MaxBudget" class="form-label fw-semibold">Budget Range</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-cash-coin"></i>
                    </span>
                    <span class="input-group-text">R</span>
                    <input asp-for="MaxBudget" 
                           class="form-control" 
                           type="number"
                           placeholder="0.00" 
                           step="0.01" />
                </div>
                <small class="text-muted">Maximum they can afford per month (South African Rand)</small>
            </div>

            <div class="mb-3">
                <label asp-for="Source" class="form-label fw-semibold">Source</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-signpost"></i>
                    </span>
                    <select asp-for="Source" class="form-select">
                        <option value="Phone">Phone Call</option>
                        <option value="Referral">Referral</option>
                        <option value="Website">Website</option>
                        <option value="Social Media">Social Media</option>
                        <option value="Walk-in">Walk-in</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <small class="text-muted">How did they find us?</small>
            </div>

            <div class="mb-3">
                <label asp-for="Notes" class="form-label fw-semibold">Quick Notes</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-journal-text"></i>
                    </span>
                    <textarea asp-for="Notes" class="form-control" rows="3" 
                             placeholder="Any important details from the call..."></textarea>
                </div>
                <small class="text-muted">What did they say? When can they move? Special requirements?</small>
            </div>
        </div>

        <!-- Quick Tips (without card styling) -->
        <div class="col-12">
            <div class="alert alert-light border-0">
                <h6 class="text-primary">
                    <i class="bi bi-lightbulb me-1"></i> Phone Call Tips
                </h6>
                <ul class="mb-0 small">
                    <li>Let them know they'll be notified when a room becomes available</li>
                    <li>Ask about their preferred room type and budget range</li>
                    <li>Confirm their phone number for future contact</li>
                    <li>You can add more details later if needed</li>
                </ul>
            </div>
        </div>
    </div>
</form>

<div class="row mt-4">
    <div class="col-12">
        <div class="d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-secondary" onclick="closeQuickAddModal()">
                <i class="bi bi-x-circle"></i> Cancel
            </button>
            <button type="button" class="btn btn-primary" onclick="submitQuickAddForm()">
                <i class="bi bi-person-plus"></i> 
                <span class="submit-text">Add to Waiting List</span>
                <div class="spinner-border spinner-border-sm ms-2" style="display: none;" role="status" aria-hidden="true"></div>
            </button>
        </div>
    </div>
</div>

<script type="text/javascript">
    // Form initialization will be handled by parent page JavaScript
    document.addEventListener('DOMContentLoaded', function() {
        if (document.getElementById('quickAddForm') && typeof initializeQuickAddForm === 'function') {
            initializeQuickAddForm();
        }
    });
    
    // Initialize immediately for dynamic content
    setTimeout(function() {
        if (document.getElementById('quickAddForm') && typeof initializeQuickAddForm === 'function') {
            initializeQuickAddForm();
        }
    }, 100);
</script>